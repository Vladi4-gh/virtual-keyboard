(()=>{"use strict";function e(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function t(t){for(var a=1;a<arguments.length;a++){var l=null!=arguments[a]?arguments[a]:{};a%2?e(Object(l),!0).forEach((function(e){i(t,e,l[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):e(Object(l)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(l,e))}))}return t}function i(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const a={virtualKeyboard:(l="virtual-keyboard",{get currentLayoutLanguage(){var e,t;return null===(e=(t=localStorage.getItem(l))&&JSON.parse(t))||void 0===e?void 0:e.currentLayoutLanguage},set currentLayoutLanguage(e){var i,a,s;i={currentLayoutLanguage:e},s=(a=localStorage.getItem(l))?JSON.parse(a):{},localStorage.setItem(l,JSON.stringify(t(t({},s),i)))}})};var l;const s={en:[[{label:"`",secondLabel:"~",keyCode:"Backquote",isWritable:!0},{label:"1",secondLabel:"!",keyCode:"Digit1",isWritable:!0},{label:"2",secondLabel:"@",keyCode:"Digit2",isWritable:!0},{label:"3",secondLabel:"#",keyCode:"Digit3",isWritable:!0},{label:"4",secondLabel:"$",keyCode:"Digit4",isWritable:!0},{label:"5",secondLabel:"%",keyCode:"Digit5",isWritable:!0},{label:"6",secondLabel:"^",keyCode:"Digit6",isWritable:!0},{label:"7",secondLabel:"&",keyCode:"Digit7",isWritable:!0},{label:"8",secondLabel:"*",keyCode:"Digit8",isWritable:!0},{label:"9",secondLabel:"(",keyCode:"Digit9",isWritable:!0},{label:"0",secondLabel:")",keyCode:"Digit0",isWritable:!0},{label:"-",secondLabel:"_",keyCode:"Minus",isWritable:!0},{label:"=",secondLabel:"+",keyCode:"Equal",isWritable:!0},{label:"‚Üê Backspace",keyCode:"Backspace"}],[{label:"Tab ‚áÑ",keyCode:"Tab"},{label:"Q",keyCode:"KeyQ",isCaseSensitive:!0,isWritable:!0},{label:"W",keyCode:"KeyW",isCaseSensitive:!0,isWritable:!0},{label:"E",keyCode:"KeyE",isCaseSensitive:!0,isWritable:!0},{label:"R",keyCode:"KeyR",isCaseSensitive:!0,isWritable:!0},{label:"T",keyCode:"KeyT",isCaseSensitive:!0,isWritable:!0},{label:"Y",keyCode:"KeyY",isCaseSensitive:!0,isWritable:!0},{label:"U",keyCode:"KeyU",isCaseSensitive:!0,isWritable:!0},{label:"I",keyCode:"KeyI",isCaseSensitive:!0,isWritable:!0},{label:"O",keyCode:"KeyO",isCaseSensitive:!0,isWritable:!0},{label:"P",keyCode:"KeyP",isCaseSensitive:!0,isWritable:!0},{label:"[",secondLabel:"{",keyCode:"BracketLeft",isWritable:!0},{label:"]",secondLabel:"}",keyCode:"BracketRight",isWritable:!0},{label:"Delete",keyCode:"Delete"}],[{label:"CapsLock",keyCode:"CapsLock"},{label:"A",keyCode:"KeyA",isCaseSensitive:!0,isWritable:!0},{label:"S",keyCode:"KeyS",isCaseSensitive:!0,isWritable:!0},{label:"D",keyCode:"KeyD",isCaseSensitive:!0,isWritable:!0},{label:"F",keyCode:"KeyF",isCaseSensitive:!0,isWritable:!0},{label:"G",keyCode:"KeyG",isCaseSensitive:!0,isWritable:!0},{label:"H",keyCode:"KeyH",isCaseSensitive:!0,isWritable:!0},{label:"J",keyCode:"KeyJ",isCaseSensitive:!0,isWritable:!0},{label:"K",keyCode:"KeyK",isCaseSensitive:!0,isWritable:!0},{label:"L",keyCode:"KeyL",isCaseSensitive:!0,isWritable:!0},{label:";",secondLabel:":",keyCode:"Semicolon",isWritable:!0},{label:"'",secondLabel:'"',keyCode:"Quote",isWritable:!0},{label:"Enter",keyCode:"Enter"}],[{label:"Shift",keyCode:"ShiftLeft"},{label:"\\",secondLabel:"|",keyCode:"Backslash",isWritable:!0},{label:"Z",keyCode:"KeyZ",isCaseSensitive:!0,isWritable:!0},{label:"X",keyCode:"KeyX",isCaseSensitive:!0,isWritable:!0},{label:"C",keyCode:"KeyC",isCaseSensitive:!0,isWritable:!0},{label:"V",keyCode:"KeyV",isCaseSensitive:!0,isWritable:!0},{label:"B",keyCode:"KeyB",isCaseSensitive:!0,isWritable:!0},{label:"N",keyCode:"KeyN",isCaseSensitive:!0,isWritable:!0},{label:"M",keyCode:"KeyM",isCaseSensitive:!0,isWritable:!0},{label:",",secondLabel:"<",keyCode:"Comma",isWritable:!0},{label:".",secondLabel:">",keyCode:"Period",isWritable:!0},{label:"/",secondLabel:"?",keyCode:"Slash",isWritable:!0},{label:"‚Üë",keyCode:"ArrowUp",isWritable:!0},{label:"Shift",keyCode:"ShiftRight"}],[{label:"Ctrl",keyCode:"ControlLeft"},{label:"‚äû",keyCode:"MetaLeft"},{label:"üåê",keyCode:"ChangeLanguage"},{label:"Alt",keyCode:"AltLeft"},{label:"",keyCode:"Space",isWritable:!0},{label:"Alt",keyCode:"AltRight"},{label:"Ctrl",keyCode:"ControlRight"},{label:"‚Üê",keyCode:"ArrowLeft",isWritable:!0},{label:"‚Üì",keyCode:"ArrowDown",isWritable:!0},{label:"‚Üí",keyCode:"ArrowRight",isWritable:!0}]],ru:[[{label:"–Å",keyCode:"Backquote",isCaseSensitive:!0,isWritable:!0},{label:"1",secondLabel:"!",keyCode:"Digit1",isWritable:!0},{label:"2",secondLabel:'"',keyCode:"Digit2",isWritable:!0},{label:"3",secondLabel:"‚Ññ",keyCode:"Digit3",isWritable:!0},{label:"4",secondLabel:";",keyCode:"Digit4",isWritable:!0},{label:"5",secondLabel:"%",keyCode:"Digit5",isWritable:!0},{label:"6",secondLabel:":",keyCode:"Digit6",isWritable:!0},{label:"7",secondLabel:"?",keyCode:"Digit7",isWritable:!0},{label:"8",secondLabel:"*",keyCode:"Digit8",isWritable:!0},{label:"9",secondLabel:"(",keyCode:"Digit9",isWritable:!0},{label:"0",secondLabel:")",keyCode:"Digit0",isWritable:!0},{label:"-",secondLabel:"_",keyCode:"Minus",isWritable:!0},{label:"=",secondLabel:"+",keyCode:"Equal",isWritable:!0},{label:"‚Üê Backspace",keyCode:"Backspace"}],[{label:"Tab ‚áÑ",keyCode:"Tab"},{label:"–ô",keyCode:"KeyQ",isCaseSensitive:!0,isWritable:!0},{label:"–¶",keyCode:"KeyW",isCaseSensitive:!0,isWritable:!0},{label:"–£",keyCode:"KeyE",isCaseSensitive:!0,isWritable:!0},{label:"–ö",keyCode:"KeyR",isCaseSensitive:!0,isWritable:!0},{label:"–ï",keyCode:"KeyT",isCaseSensitive:!0,isWritable:!0},{label:"–ù",keyCode:"KeyY",isCaseSensitive:!0,isWritable:!0},{label:"–ì",keyCode:"KeyU",isCaseSensitive:!0,isWritable:!0},{label:"–®",keyCode:"KeyI",isCaseSensitive:!0,isWritable:!0},{label:"–©",keyCode:"KeyO",isCaseSensitive:!0,isWritable:!0},{label:"–ó",keyCode:"KeyP",isCaseSensitive:!0,isWritable:!0},{label:"–•",keyCode:"BracketLeft",isCaseSensitive:!0,isWritable:!0},{label:"–™",keyCode:"BracketRight",isCaseSensitive:!0,isWritable:!0},{label:"Delete",keyCode:"Delete"}],[{label:"CapsLock",keyCode:"CapsLock"},{label:"–§",keyCode:"KeyA",isCaseSensitive:!0,isWritable:!0},{label:"–´",keyCode:"KeyS",isCaseSensitive:!0,isWritable:!0},{label:"–í",keyCode:"KeyD",isCaseSensitive:!0,isWritable:!0},{label:"–ê",keyCode:"KeyF",isCaseSensitive:!0,isWritable:!0},{label:"–ü",keyCode:"KeyG",isCaseSensitive:!0,isWritable:!0},{label:"–†",keyCode:"KeyH",isCaseSensitive:!0,isWritable:!0},{label:"–û",keyCode:"KeyJ",isCaseSensitive:!0,isWritable:!0},{label:"–õ",keyCode:"KeyK",isCaseSensitive:!0,isWritable:!0},{label:"–î",keyCode:"KeyL",isCaseSensitive:!0,isWritable:!0},{label:"–ñ",keyCode:"Semicolon",isCaseSensitive:!0,isWritable:!0},{label:"–≠",keyCode:"Quote",isCaseSensitive:!0,isWritable:!0},{label:"Enter",keyCode:"Enter"}],[{label:"Shift",keyCode:"ShiftLeft"},{label:"\\",secondLabel:"|",keyCode:"Backslash",isWritable:!0},{label:"–Ø",keyCode:"KeyZ",isCaseSensitive:!0,isWritable:!0},{label:"–ß",keyCode:"KeyX",isCaseSensitive:!0,isWritable:!0},{label:"–°",keyCode:"KeyC",isCaseSensitive:!0,isWritable:!0},{label:"–ú",keyCode:"KeyV",isCaseSensitive:!0,isWritable:!0},{label:"–ò",keyCode:"KeyB",isCaseSensitive:!0,isWritable:!0},{label:"–¢",keyCode:"KeyN",isCaseSensitive:!0,isWritable:!0},{label:"–¨",keyCode:"KeyM",isCaseSensitive:!0,isWritable:!0},{label:"–ë",keyCode:"Comma",isCaseSensitive:!0,isWritable:!0},{label:"–Æ",keyCode:"Period",isCaseSensitive:!0,isWritable:!0},{label:".",secondLabel:",",keyCode:"Slash",isWritable:!0},{label:"‚Üë",keyCode:"ArrowUp",isWritable:!0},{label:"Shift",keyCode:"ShiftRight"}],[{label:"Ctrl",keyCode:"ControlLeft"},{label:"‚äû",keyCode:"MetaLeft"},{label:"üåê",keyCode:"ChangeLanguage"},{label:"Alt",keyCode:"AltLeft"},{label:"",keyCode:"Space",isWritable:!0},{label:"Alt",keyCode:"AltRight"},{label:"Ctrl",keyCode:"ControlRight"},{label:"‚Üê",keyCode:"ArrowLeft",isWritable:!0},{label:"‚Üì",keyCode:"ArrowDown",isWritable:!0},{label:"‚Üí",keyCode:"ArrowRight",isWritable:!0}]]};function o(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}const n=function(){function e(t,i,a,l,s,o,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.keyCode=i,this.label=a,this.secondLabel=l,this.isLowerCase=s,this.isActive=o,this.onClick=n}var t,i;return t=e,(i=[{key:"render",value:function(){var e=document.createElement("button");e.classList.add("key"),this.isActive&&e.classList.add("active"),e.setAttribute("data-key-code",this.keyCode),e.innerHTML='<span class="label">'.concat(this.isLowerCase?this.label.toLowerCase():this.label,"</span>"),this.secondLabel&&(e.innerHTML+='<span class="upper-label">'.concat(this.secondLabel,"</span>")),e.addEventListener("click",this.onClick),this.container.appendChild(e)}}])&&o(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function b(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function d(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}const y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.isLowerCase=!0,this.isShift=!1,this.isCapsLock=!1,this.switchLayout(!0)}var t,i;return t=e,i=[{key:"switchLayout",value:function(e){var t,i;t=e?null!==(i=a.virtualKeyboard.currentLayoutLanguage)&&void 0!==i?i:"en":"en"===a.virtualKeyboard.currentLayoutLanguage?"ru":"en",a.virtualKeyboard.currentLayoutLanguage=t,this.keysLayout=s[t],this.keysInfo=this.keysLayout.flat().reduce((function(e,t){return e[t.keyCode]=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){b(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},t),e}),{})}},{key:"getKeyHandler",value:function(e){var t=this;return"ChangeLanguage"===e.keyCode?function(){t.switchLayout(),t.renderKeyboard(),t.textElement.focus()}:"Tab"===e.keyCode?function(){t.textElement.value+="\t",t.textElement.focus()}:"Backspace"===e.keyCode?function(){t.handleBackspace(),t.textElement.focus()}:"Delete"===e.keyCode?function(){t.handleDelete(),t.textElement.focus()}:"Enter"===e.keyCode?function(){t.textElement.value+="\n",t.textElement.focus()}:"Space"===e.keyCode?function(){t.textElement.value+=" ",t.textElement.focus()}:"CapsLock"===e.keyCode?function(){t.isCapsLock=!t.isCapsLock,t.isLowerCase=!t.isCapsLock,t.renderKeyboard(),t.textElement.focus()}:e.isWritable?function(){t.textElement.value+=t.isLowerCase?e.label.toLowerCase():e.label,t.textElement.focus()}:function(){t.textElement.focus()}}},{key:"initializeEventListeners",value:function(){var e=this;document.addEventListener("keydown",(function(t){t.preventDefault(),document.querySelector('.key[data-key-code="'.concat(t.code,'"]')).classList.add("active"),"Tab"===e.keysInfo[t.code].keyCode?e.textElement.value+="\t":"Backspace"===e.keysInfo[t.code].keyCode?e.handleBackspace():"Delete"===e.keysInfo[t.code].keyCode?e.handleDelete():"Enter"===e.keysInfo[t.code].keyCode?e.textElement.value+="\n":"Space"===e.keysInfo[t.code].keyCode?e.textElement.value+=" ":"CapsLock"===e.keysInfo[t.code].keyCode?(e.isCapsLock=!e.isCapsLock,e.isLowerCase=!e.isCapsLock,e.renderKeyboard()):"ArrowUp"===e.keysInfo[t.code].keyCode?e.textElement.value+="‚Üë":"ArrowLeft"===e.keysInfo[t.code].keyCode?e.textElement.value+="‚Üê":"ArrowDown"===e.keysInfo[t.code].keyCode?e.textElement.value+="‚Üì":"ArrowRight"===e.keysInfo[t.code].keyCode?e.textElement.value+="‚Üí":e.keysInfo[t.code].isWritable?e.textElement.value+=t.key:t.shiftKey&&!t.repeat?(e.isShift=!0,e.isLowerCase=!!e.isCapsLock&&!e.isLowerCase,e.renderKeyboard()):t.shiftKey&&t.ctrlKey&&(e.switchLayout(),e.renderKeyboard()),e.textElement.focus()})),document.addEventListener("keyup",(function(t){document.querySelector('.key[data-key-code="'.concat(t.code,'"]')).classList.remove("active"),e.isLowerCase=!e.isCapsLock||!e.isLowerCase,e.isShift&&(e.isShift=!1,e.renderKeyboard()),e.textElement.focus()}))}},{key:"handleDelete",value:function(){var e=this.textElement.selectionStart,t=this.textElement.selectionEnd;this.textElement.value=e===t?this.textElement.value.substring(0,e)+this.textElement.value.substring(e+1):this.textElement.value.substring(0,e)+this.textElement.value.substring(t),this.textElement.focus(),this.textElement.setSelectionRange(e,e)}},{key:"handleBackspace",value:function(){var e=this.textElement.selectionStart,t=this.textElement.selectionEnd;e===t?(this.textElement.value=this.textElement.value.substring(0,e-1)+this.textElement.value.substring(t),this.textElement.setSelectionRange(e-1,e-1)):(this.textElement.value=this.textElement.value.substring(0,e)+this.textElement.value.substring(t),this.textElement.setSelectionRange(e,e)),this.textElement.focus()}},{key:"renderTextarea",value:function(){var e=document.createElement("textarea");e.classList.add("text"),this.container.appendChild(e),this.textElement=e}},{key:"renderKeyboard",value:function(){var e=this,t=document.querySelector(".keyboard");t&&t.remove();var i=document.createElement("div");i.classList.add("keyboard"),this.container.appendChild(i),this.keysLayout.forEach((function(t){var a=document.createElement("div");a.classList.add("keys-row"),t.forEach((function(t){var i=e.getKeyHandler(t),l="CapsLock"===t.keyCode&&e.isCapsLock;new n(a,t.keyCode,t.label,t.secondLabel,!!t.isCaseSensitive&&e.isLowerCase,l,i).render()})),i.appendChild(a)}))}},{key:"render",value:function(){this.container.classList.add("keyboard-container"),this.renderTextarea(),this.renderKeyboard(),this.initializeEventListeners()}}],i&&d(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();window.addEventListener("load",(function(){var e,t,i=document.createElement("main");i.classList.add("container"),e=i,(t=document.createElement("header")).classList.add("header"),t.innerHTML='<h1 class="title">Virtual keyboard</h1>',e.appendChild(t),function(e){var t=document.createElement("div");e.appendChild(t),new y(t).render()}(i),function(e){var t=document.createElement("footer");t.classList.add("footer"),t.innerHTML='<p class="row">Windows usage only</p><p class="row">Ctrl + Shift to switch language (EN/RU)</p>',e.appendChild(t)}(i),document.body.appendChild(i)}))})();
//# sourceMappingURL=main.min.js.map